(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1e04":function(e,t,a){"use strict";(function(e){a("e6cf"),a("a79d");var n=a("bc3a"),o=a.n(n),s=a("6f0d");const i=Object(s["setupCache"])({maxAge:9e5});function l(t,a,n){const s=e.env.API_GUEST_TOKEN,l=a||!1;if(n=n||!1,t.method=t.method||"get",t.cache=t.cache||!1,null===s)throw new Error("Api key not defined");const r={baseURL:"https://zbc.dev"};t.cache&&(r.adapter=i.adapter);const c=o.a.create(r);function d(e){return new Promise(((t,a)=>{n&&l.notify({group:!1,position:"top",color:"info",message:"Complete"}),t(e)}))}function u(e){return new Promise(((t,a)=>{n&&l.notify({group:!1,position:"top",color:"red",message:"Request Failed."}),a(e.response)}))}function p(){return new Promise(((e,t)=>{e(),l&&l.loading.hide()}))}return o.a.defaults.baseURL="https://zbc.dev",o.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",l&&l.loading.show(),c(t).then(d).catch(u).finally(p)}t["a"]=l}).call(this,a("4362"))},8041:function(e,t,a){"use strict";a("cb9a")},"8b24":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"row col-12 q-pa-md"},[a("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 text-center"},[a("div",{staticClass:"q-pr-md q-pl-md"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show.topdown,expression:"show.topdown"}],staticClass:"container",staticStyle:{position:"relative"},attrs:{id:"container"}},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.show.topdown,expression:"show.topdown"}],staticClass:"text-white",staticStyle:{"z-index":"99999999","font-weight":"bold","text-align":"right",position:"absolute",bottom:"10px",right:"10px"},attrs:{icon:"zoom_in",dense:"",flat:""},on:{click:function(t){return e.swapCanvas()}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.show.chase,expression:"show.chase"}],staticClass:"container",staticStyle:{position:"relative"},attrs:{id:"container1"}},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:e.show.chase,expression:"show.chase"}],staticClass:"text-white",staticStyle:{"z-index":"99999999","font-weight":"bold","text-align":"right",position:"absolute",bottom:"10px",right:"10px"},attrs:{icon:"zoom_out",dense:"",flat:""},on:{click:function(t){return e.swapCanvas()}}})],1)])]),a("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12"},[a("q-card",[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"real",label:"Real time"}}),a("q-tab",{attrs:{name:"recent",label:"Recent events"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticClass:"no-padding",attrs:{name:"real"}},[a("q-input",{staticClass:"q-pa-md",attrs:{label:"Search",icon:"language",outlined:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}])}),a("div",[a("q-table",{attrs:{data:this.queue.nodes,columns:e.table.nodes.columns,loading:e.loading,"row-key":"pubkey",pagination:e.table.nodes.pagination,"binary-state-sort":"",flat:""},on:{"update:pagination":function(t){return e.$set(e.table.nodes,"pagination",t)}},scopedSlots:e._u([{key:"body-cell-edit",fn:function(t){return[a("q-td",{staticClass:"cursor-pointer",attrs:{props:t}},[a("q-btn",{attrs:{color:"primary","text-color":"white",icon:"edit",round:""},on:{click:function(a){e.selected.node=t.row,e.dialogs.account=!0}}})],1)]}}])})],1)],1),a("q-tab-panel",{attrs:{name:"recent"}},[a("q-input",{attrs:{label:"Search",icon:"language",outlined:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}])}),a("q-table",{attrs:{data:this.events,columns:e.table.events.columns,loading:e.loading,"row-key":"pubkey",pagination:e.table.events.pagination,"binary-state-sort":"",flat:""},on:{"update:pagination":function(t){return e.$set(e.table.events,"pagination",t)}}})],1)],1)],1)],1),a("q-dialog",{model:{value:e.dialogs.account,callback:function(t){e.$set(e.dialogs,"account",t)},expression:"dialogs.account"}},[a("q-card",{staticStyle:{width:"800px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Change the account name")])]),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n        Change the display name for the account:\n\n        "),a("br"),a("br"),a("span",{staticClass:"text-grey"},[e._v(e._s(e.selected.node.showPubkey))]),a("br"),a("br"),e._v("\n\n        It is stored locally and will get reset with a new browser session.\n\n        "),a("br"),a("br"),a("b",[e._v("Name")]),a("br"),a("q-input",{attrs:{label:"Email address name",outlined:""}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Change",color:"primary"}})],1)],1)],1)],1)},o=[],s=(a("4e82"),a("e6cf"),a("a79d"),a("1e04")),i={name:"PageIndex",data(){return{tab:"real",table:{nodes:{columns:[{name:"position",label:"Position",align:"left",field:"position",sortable:!0},{name:"funds",align:"left",label:"Locked  ZBC",field:"funds",sortable:!0},{name:"showPubkey",label:"Account",field:"showPubkey",align:"left",sortable:!0},{name:"edit",label:"",field:"edit",align:"left",sortable:!1}],pagination:{sortBy:"funds",descending:!0,page:1,rowsPerPage:8}},events:{columns:[{name:"height",label:"Height",align:"left",field:"height",sortable:!0},{name:"funds",label:"Funds",align:"left",field:"funds",sortable:!0},{name:"joined",label:"Joined",align:"left",field:"joined",sortable:!0},{name:"node",label:"Node",align:"left",field:"showPubkey",sortable:!0}],pagination:{sortBy:"height",descending:!1,page:1,rowsPerPage:16}}},selected:{node:{}},dialogs:{account:!1},queue:{},events:[],simulation:{topdown:void 0,chase:void 0},show:{chase:!0,topdown:!0},initcanvas2:!1,loading:!1}},created(){this.$q.loading.show(),this.main().then((()=>{this.$q.loading.hide()})).catch((()=>{this.loading=!1}))},mounted(){this.simulation.chase=new window.roadBuilder({containerId:"container",initCamera:"topdown",visible:{cars:!1,grid:!1},label:{offset:{top:0}}})},methods:{swapCanvas(){this.$q.loading.show(),this.show.topdown=!this.show.topdown,this.show.chase=!this.show.topdown;document.getElementById("label-renderer-container");const e=document.getElementById("label-renderer-container1");document.getElementById("label-renderer-container").style.display=this.show.topdown?"block":"none",e&&(e.style.display=this.show.topdown?"none":"block"),setTimeout((()=>{this.initcanvas2||(this.simulation.topdown=new window.roadBuilder({containerId:"container1",initCamera:"chase",visible:{cars:!0,grid:!1},label:{offset:{top:-40}}}),this.queue.nodes.slice(0,24).sort(((e,t)=>parseInt(e.funds)-parseInt(t.funds))).map(((e,t)=>{this.simulation.topdown.theCarsManager.add(e.position,e.funds*t)})),this.simulation.topdown.theCarsManager.cars[0].activeCamera=!0,this.initcanvas2=!0),this.$q.loading.hide()}),400)},main(){return new Promise(((e,t)=>{Object(s["a"])({method:"get",url:"/queue"}).then((a=>{this.queue=a.data,this.queue.nodes.map((e=>{e.showPubkey=e.pubkey.slice(0,8)+"..."+e.pubkey.slice(-4)})),this.queue.nodes.sort(((e,t)=>parseInt(t.funds)-parseInt(e.funds))).map(((e,t)=>{e.position=t+1})),console.log(this.simulation.topdown),this.queue.nodes.slice(0,24).sort(((e,t)=>parseInt(e.funds)-parseInt(t.funds))).map(((e,t)=>{this.simulation.chase.theCarsManager.add(e.position,e.funds*t)})),window.simulation=this.simulation,Object(s["a"])({method:"get",url:"/events"}).then((e=>{this.events=e.data.events.map((e=>(e.showPubkey=e.node.slice(0,8)+"..."+e.node.slice(-4),e)))})).catch((()=>{t()})).finally((()=>{e()}))})).catch((()=>{t()}))}))}}},l=i,r=(a("8041"),a("2877")),c=a("9989"),d=a("9c40"),u=a("f09f"),p=a("429b"),h=a("7460"),b=a("eb85"),m=a("adad"),w=a("823b"),g=a("27f9"),f=a("0016"),v=a("eaac"),y=a("db86"),q=a("24e8"),C=a("a370"),x=a("4b7e"),k=a("7f67"),P=a("eebe"),I=a.n(P),Q=Object(r["a"])(l,n,o,!1,null,null,null);t["default"]=Q.exports;I()(Q,"components",{QPage:c["a"],QBtn:d["a"],QCard:u["a"],QTabs:p["a"],QTab:h["a"],QSeparator:b["a"],QTabPanels:m["a"],QTabPanel:w["a"],QInput:g["a"],QIcon:f["a"],QTable:v["a"],QTd:y["a"],QDialog:q["a"],QCardSection:C["a"],QCardActions:x["a"]}),I()(Q,"directives",{ClosePopup:k["a"]})},cb9a:function(e,t,a){}}]);