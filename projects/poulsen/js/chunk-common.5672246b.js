(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"15be":function(e,t,a){},"46a0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-xl-10 col-lg-10 col-md-10 col-sm-10 col-xs-10"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-10 col-lg-10 col-md-10 col-sm-10 col-xs-8"},[a("q-input",{attrs:{color:"teal",outlined:"",label:"Plate number (No input validation yet)"},model:{value:e.regNum,callback:function(t){e.regNum=t},expression:"regNum"}})],1),a("div",{staticClass:"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-xs-4"},[a("q-btn",{staticStyle:{height:"100%",width:"94%","margin-left":"8px"},attrs:{loading:e.loading,color:"primary",label:"Query"},on:{click:e.getStepOne}})],1)])]),a("br"),a("div",{staticClass:"steps col-10",staticStyle:{"margin-top":"16px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.step.one.vehicle.Vin.length>0,expression:"step.one.vehicle.Vin.length > 0"}],staticClass:"col-10"},[a("q-list",[a("q-expansion-item",{directives:[{name:"show",rawName:"v-show",value:e.step.one.show,expression:"step.one.show"}],staticStyle:{border:"1px #000 solid"},attrs:{icon:"",label:"Icelandic car registry","header-class":"text-primary",caption:e.regNum},model:{value:e.step.one.expanded,callback:function(t){e.$set(e.step.one,"expanded",t)},expression:"step.one.expanded"}},[a("q-card",[a("q-card-section",{directives:[{name:"show",rawName:"v-show",value:e.step.one.vehicle.Vin.length>0,expression:"step.one.vehicle.Vin.length > 0"}]},[e._v("\n                Vin: "+e._s(e.step.one.vehicle.Vin)+" "),a("br"),a("p",{staticClass:"text-primary"},[e._v("You seem to have a valid car.")]),a("div",{staticClass:"col-12 text-right"},[e._v("\n                    \n                  "),a("q-btn",{staticStyle:{height:"100%"},attrs:{loading:e.step.one.loading,size:"md",color:"primary",label:"Continue"},on:{click:e.getStepTwo}})],1)])],1)],1),a("br"),a("q-expansion-item",{directives:[{name:"show",rawName:"v-show",value:e.step.two.show,expression:"step.two.show"}],staticStyle:{border:"1px #000 solid"},attrs:{label:"Your car","header-class":"text-primary",caption:"Vin: "+e.step.one.vehicle.Vin},model:{value:e.step.two.expanded,callback:function(t){e.$set(e.step.two,"expanded",t)},expression:"step.two.expanded"}},[a("q-card",[a("q-card-section",[a("q-select",{attrs:{filled:"",options:e.step.two.data.matchingVehicles,label:"Select a model"},model:{value:e.step.two.input.vehicleSelection,callback:function(t){e.$set(e.step.two.input,"vehicleSelection",t)},expression:"step.two.input.vehicleSelection"}}),a("br"),a("div",{staticClass:"col-12 text-right"},[e._v("\n                      \n                    "),a("q-btn",{staticStyle:{height:"100%"},attrs:{loading:e.step.two.loading,size:"md",color:"primary",label:"Continue"},on:{click:e.getStepFive}})],1)],1)],1)],1),a("br"),a("q-expansion-item",{directives:[{name:"show",rawName:"v-show",value:e.step.five.show,expression:"step.five.show"}],staticStyle:{border:"1px #000 solid"},attrs:{label:"Choose a part (Work in progress...)","header-class":"text-primary"},model:{value:e.step.five.expanded,callback:function(t){e.$set(e.step.five,"expanded",t)},expression:"step.five.expanded"}},[a("q-card",[a("q-card-section",[a("products",{ref:"products",attrs:{treeCatId:"1"}})],1)],1)],1)],1)],1)])])},r=[],n=(a("28a5"),a("bc3a")),o=a.n(n),s=a("6b64"),c=a("7079"),l={name:"PartFinder",components:{Products:c["a"]},data:function(){return{loading:!1,regNum:"",step:{one:{loading:!1,show:!1,expanded:!0,vehicle:{Vin:""}},two:{loading:!1,show:!1,expanded:!0,data:{matchingVehicles:[]},input:{vehicleSelection:{label:"Select a car",value:0}}},three:{loading:!1,show:!1,expanded:!0,data:{cats:[{label:"Select a cat",value:0}],subCats:[{label:"Select a sub cat",value:0}]},input:{}},four:{loading:!1,show:!1,expanded:!0,data:{carId:0},input:{catSelection:{label:"Select a cat",value:0},subCatSelection:{label:"Select a sub cat",value:0}}},five:{loading:!1,show:!1,expanded:!0,data:[],input:{}}}}},methods:{getStepOne:function(){var e=this;this.loading=!0,o.a.get("https://dev.poulsen.is/api/VehicleRegistryService.php?regNum="+this.regNum).then((function(t){e.loading=!1,e.step.one.show=!1,e.step.one.vehicle.Vin="",t.data.error?e.loading=!1:(e.step.one.vehicle=t.data.ret.Vehicle[0],e.getStepTwo(),e.loading=!0)}))},getStepTwo:function(){var e=this;this.step.one.loading=!0,o.a.get('http://dev.poulsen.is/api/TecAlliance.php?fn=getVehiclesByVIN&fnparams={"lang": "en","provider" : 21011,"country":"IS","articleCountry":"IS","vin": "'+this.step.one.vehicle.Vin+'"}').then((function(t){if(e.loading=!1,e.step.one.loading=!1,e.step.two.show=!0,!t.data.error)for(var a in e.step.one.data=t.data.ret.data,e.step.two.data.matchingVehicles=[],t.data.ret.data.matchingVehicles.array)t.data.ret.data.matchingVehicles.array[a].label=t.data.ret.data.matchingVehicles.array[a].carName,t.data.ret.data.matchingVehicles.array[a].value=t.data.ret.data.matchingVehicles.array[a].manuId,e.step.two.data.matchingVehicles.push(t.data.ret.data.matchingVehicles.array[a])}))},getStepFour_:function(){var e=this;this.step.two.loading=!0,o.a.get('http://dev.poulsen.is/api/TecAlliance.php?fn=getVehicleByIds4&fnparams={"lang":"en","provider":21011,"country":"IS","countriesCarSelection":"IS","articleCountry":"IS","axles":false,"cabs":false,"countryGroupFlag":false,"kbaData":false,"motorCodes":false,"protoTypes":false,"registrationInfo":false,"secondaryTypes":false,"wheelbases":false,"carIds":{"array":['+this.step.two.input.vehicleSelection.carId+"]}}").then((function(t){e.step.three.show=!0,e.step.two.loading=!1,t.data.error||(e.step.three.data=t.data.ret.data.array[0])}))},getStepFive:function(){var e=this;this.step.two.loading=!0,o.a.get('http://dev.poulsen.is/api/TecAlliance.php?fn=getArticles&fnparams={ "articleCountry": "IS", "provider": 21011, "linkageTargetId": "'+this.step.two.input.vehicleSelection.carId+'", "linkageTargetType": "P", "lang": "en", "perPage": 729, "includeImages": true }').then((function(t){var a=[];for(var i in t.data.ret.articles)a.push(t.data.ret.articles[i].articleNumber);var r=s["a"].arr.split(a,Math.round(a.length/4)),n={vendorItemNoFilter1:"",vendorItemNoFilter2:"",vendorItemNoFilter3:"",vendorItemNoFilter4:"",vendorItemNoFilter5:"",vendorItemNoFilter6:""};r.length;for(var o=0;o<r.length-1;o++)n["vendorItemNoFilter"+(o+1)]=r[o].join("|");e.$refs.products.queryParamsSet(n),e.$refs.products.tecAllianceSetArticles(t.data.ret.articles),e.step.five.show=!0,e.step.five.expand=!0,e.step.two.loading=!1}))}}},d=l,p=a("2877"),u=a("eebe"),g=a.n(u),h=a("27f9"),v=a("9c40"),m=a("1c1c"),f=a("3b73"),y=a("f09f"),w=a("a370"),b=a("ddd8"),S=Object(p["a"])(d,i,r,!1,null,null,null);t["a"]=S.exports;g()(S,"components",{QInput:h["a"],QBtn:v["a"],QList:m["a"],QExpansionItem:f["a"],QCard:y["a"],QCardSection:w["a"],QSelect:b["a"]})},"6b64":function(e,t,a){"use strict";var i={hc:function(e){return 0===e||24===e?"12:00am":12===e?"12:00pm":e%12+":00"+(e>12?"pm":"am")}},r={get:function(e,t){var a=window.localStorage.getItem(e);return"Object"===t&&(a=JSON.parse(a)),a},set:function(e,t,a){"Object"===a&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)},empty:function(e){return null===window.localStorage.getItem(e)}},n={split:function(e,t){var a=[];if(t<2)return[e];for(var i=Math.floor(e.length/t),r=0;r<e.length;r+=i){if(a.length>=t-1){a.push(e.slice(r,e.length));break}a.push(e.slice(r,r+i))}return a}},o={split:function(e,t){for(var a=[],i=0;i<e.length;i+=t)a.push(e.slice(i,i+t));return a}},s={clone:function(e){return JSON.parse(JSON.stringify(e))},merge:function(e,t){for(var a in t)void 0!==e[a]&&(t[a]=e[a]);return t}},c={instance:function(){return{id:0,email:""}},lsKey:"Auth-User"};c.fn={get:function(){return r.empty(c.lsKey)?c.instance():r.get(c.lsKey,"Object")},lsStore:function(e){var t=c.instance();t.id=e.id,t.email=e.email,r.set(c.lsKey,t,"Object")},lsRemove:function(){r.remove(c.lsKey)},loggedIn:function(){return!r.empty(c.lsKey)}},t["a"]={time:i,ls:r,str:n,arr:o,obj:s,user:c}},7079:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"qa-md p-products"},[a("div",{staticClass:"row",staticStyle:{"margin-top":"-20px","margin-left":"8px"}},[a("q-btn-toggle",{staticClass:"my-custom-toggle",staticStyle:{border:"1px solid #027be3",padding:"0",margin:"0"},attrs:{"no-caps":"",unelevated:"","toggle-color":"primary",color:"white","text-color":"primary",options:[{value:"grid",slot:"grid"},{value:"filter",slot:"filter"}]},on:{input:function(t){return e.viewTypeChange(e.config.viewType)}},scopedSlots:e._u([{key:"grid",fn:function(){return[a("div",{staticClass:"row items-center no-wrap",staticStyle:{padding:"0",margin:"0"}},[a("q-icon",{staticStyle:{padding:"0",margin:"0"},attrs:{right:"",name:"grid_on"}})],1)]},proxy:!0},{key:"filter",fn:function(){return[a("div",{staticClass:"row items-center no-wrap"},[a("q-icon",{staticStyle:{padding:"0",margin:"0"},attrs:{right:"",name:"filter_list"}})],1)]},proxy:!0}]),model:{value:e.config.viewType,callback:function(t){e.$set(e.config,"viewType",t)},expression:"config.viewType"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"grid"===e.config.viewType,expression:"config.viewType === 'grid'"}],staticClass:"col-12",staticStyle:{padding:"8px 0 8px 4px"}},[a("q-breadcrumbs",{staticStyle:{cursor:"pointer"}},[a("q-breadcrumbs-el",{attrs:{label:"Home"}}),a("q-breadcrumbs-el",{attrs:{label:"Components"}}),a("q-breadcrumbs-el",{attrs:{label:"Breadcrumbs"}}),a("q-breadcrumbs-el",{attrs:{label:"(Work in progress...)"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"grid"===e.config.viewType,expression:"config.viewType === 'grid'"}],staticClass:"row",staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},e._l(e.categoryTree.data,(function(t,i){return a("div",{key:i,staticClass:"col-3 p-card-container",on:{click:function(a){return e.girdTreeSelect(t)}}},[a("q-card",{staticClass:"p-card",staticStyle:{margin:"8px 16px 8px 0px"}},[a("q-card-section",[a("img",{staticStyle:{width:"100%"},attrs:{src:"https://cdn3.iconfinder.com/data/icons/automotive-parts/256/turbo-512.png"}}),a("div",[a("q-tooltip",[e._v("\n                 "+e._s(t.Description)+"\n                ")]),a("p",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[e._v(e._s(t.Description))])],1)])],1)],1)})),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"filter"===e.config.viewType,expression:"config.viewType === 'filter'"}],staticClass:"row justify-center"},[a("div",{staticClass:"col-10"},[a("treeselect",{attrs:{options:e.categoryTree.data,multiple:!0,"value-consists-of":"LEAF_PRIORITY",placeholder:e.categoryTree.placeholder,"disable-branch-nodes":!0,disabled:e.products.loading},on:{input:function(t){return e.categoryTreeSelect()}},model:{value:e.categoryTree.select,callback:function(t){e.$set(e.categoryTree,"select",t)},expression:"categoryTree.select"}})],1)]),a("div",{staticClass:"ror",staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"col-10"},[e.config.init?a("q-infinite-scroll",{attrs:{offset:250},on:{load:e.onLoad},scopedSlots:e._u([e.products.loading?{key:"loading",fn:function(){return[a("div",{staticClass:"row justify-center"},[a("div",{staticClass:"col-1"},[a("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)])]},proxy:!0}:null],null,!0)},[a("div",{staticClass:"row"},e._l(e.products.data,(function(t,i){return a("div",{key:i,staticClass:"p-card-container col-xl-2 col-lg-3 col-md-3 col-sm-6 col-xs-12"},[a("q-card",{staticClass:"p-card",staticStyle:{margin:"8px 16px 8px 0px"}},[a("q-card-section",[a("img",{staticStyle:{width:"100%"},attrs:{src:t.img}}),a("div",[a("q-tooltip",[e._v("\n                 "+e._s(t.Description)+"\n                ")]),a("p",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[e._v(e._s(t.Description))])],1),a("p",{staticStyle:{padding:"0",margin:"0"}},[a("span",{staticStyle:{color:"#ccc"}},[e._v("Unit Price:")]),e._v(" "+e._s(t.UnitPrice)+"ISK")]),a("p",[a("span",{staticStyle:{color:"#ccc"}},[e._v("Unit Price (VAT): ")]),e._v(" "+e._s(t.UnitPriceInclVAT)+"ISK")])])],1)],1)})),0)]):e._e()],1)])])},r=[],n=(a("551c"),a("06db"),a("542c"),a("ca17")),o=a.n(n),s=a("bc3a"),c=a.n(s),l=a("6b64"),d={name:"Products",components:{Treeselect:o.a},props:{viewType:String,queryParams:Object,treeCatId:String},data:function(){return{config:{init:!1,viewType:"grid"},products:{loading:!1,queryParams:{itemXML:"",pageSize:10,pageNo:1,vendorItemNoFilter1:"",vendorItemNoFilter2:"",vendorItemNoFilter3:"",vendorItemNoFilter4:"",vendorItemNoFilter5:"",vendorItemNoFilter6:"",webCategoryFilter:""},data:[],pagination:{pageSize:10,page:1,done:function(){}},nothingFound:!1},categoryTree:{placeholder:"Please Select a category...",select:[],data:[]},tecAlliance:{init:!1,articles:[]},vehicles:{select:"",data:[]},infiniteScroll:!1}},created:function(){console.warn(">>> Products: "),console.log(this.treeCatId,this.queryParams),void 0!==this.viewType&&(this.config.viewType=this.viewType),void 0!==this.queryParams&&this.queryParamsSet(this.queryParams),this.categoryTreeGet(this.treeCatId)},methods:{get:function(){var e=this;return this.products.queryParams.pageSize=this.products.pagination.pageSize,this.products.queryParams.pageNo=this.products.pagination.page,new Promise((function(t,a){c.a.get("http://dev.poulsen.is/api/NavApi.php?cu=GetProductInfo&fn=GetProductv4&pa="+JSON.stringify(e.products.queryParams)).then((function(e){t(e)})).catch((function(e){a(e)}))}))},resetGet:function(){this.products.pagination.page=0,this.products.data=[],this.products.pagination.done()},queryParamsSet:function(e){this.products.queryParams=l["a"].obj.merge(e,this.products.queryParams),console.log(this.products.queryParams)},tecAllianceSetArticles:function(e){this.tecAlliance.articles=e},categoryTreeGet:function(e){var t=this;return new Promise((function(a,i){t.categoryTree.placeholder="Loading...",c.a.get("http://dev.poulsen.is/api/NavApi.php?cu=GetCategoryTree&fn=GetWebCategories&pa={%22categoriesXML%22:%22%22}").then((function(i){var r=i.data.data.categoriesXML.WebCategoryTree;function n(e,t){return e.filter((function(e){return e.ID===t}))}function o(e,t){return e.filter((function(e){return e.ParentID===t}))}function s(e){if(0===e.length)return[];for(var t in e){e[t].id=e[t].ID,e[t].label=e[t].Description,delete e[t].ID;var a=o(r,e[t].id),i=s(a);i.length>0&&(e[t].children=i)}return e}var c=n(r,parseInt(e)),l=o(r,c[0].ID);t.categoryTree.data=s(l),t.categoryTree.placeholder="Please Select a category...",a(t.categoryTree)})).catch((function(e){i(e),t.categoryTree.placeholder="Error: failed getting categories"}))}))},categoryTreeReset:function(){this.categoryTree.select=[],this.products.queryParams.webCategoryFilter=""},categoryTreeSelect:function(){this.products.queryParams.webCategoryFilter=this.categoryTree.select.join("|"),this.resetGet(),this.onLoad(0,this.products.pagination.done)},categoryTreeIsLeaf:function(e){return 0===e.length},girdTreeSelect:function(e){this.categoryTreeGet(e.id),this.config.init=!1,void 0===e.children&&(this.config.init=!0,this.gridTreeSetCategoryFilter(e.id))},gridTreeSetCategoryFilter:function(e){this.products.queryParams.webCategoryFilter=e,this.resetGet(),this.onLoad(0,this.products.pagination.done)},onLoad:function(e,t){var a=this;this.products.loading=!0,this.get().then((function(e){a.products.pagination.page++,a.products.loading=!1,a.products.pagination.done=t,void 0!==e.data.data.itemXML.Item?(console.log(a.tecAlliance.articles),Array.isArray(e.data.data.itemXML.Item)||(e.data.data.itemXML.Item=[e.data.data.itemXML.Item]),e.data.data.itemXML.Item.map((function(e){for(var t in console.log(e),e.img="https://banner2.cleanpng.com/20180418/ife/kisspng-drawing-m-02csf-line-art-cartoon-car-parts-5ad753bd7300a6.6853435815240611174711.jpg",e.tecAlliance=[],a.tecAlliance.articles)e.No2===a.tecAlliance.articles[t].articleNumber&&(e.tecAlliance=a.tecAlliance.articles[t],e.img=a.tecAlliance.articles[t].images[0].imageURL400);a.products.data.push(e)})),a.products.pagination.done()):a.products.nothingFound=!0})).catch((function(e){console.log(e),a.$q.notify({color:"negative",message:"Unable to get products (Server side error), please try again later."}),a.products.loading=!1,a.products.pagination.done=t}))},viewTypeChange:function(e){this.config.viewType=e,this.config.init="filter"===e,this.resetGet(),this.categoryTreeGet(this.treeCatId)},viewTypeGet:function(){return this.config.viewType},setInit:function(e){this.config.init=e}}},p=d,u=(a("decd"),a("f30e"),a("2877")),g=a("eebe"),h=a.n(g),v=a("9989"),m=a("6a67"),f=a("0016"),y=a("ead5"),w=a("079e"),b=a("f09f"),S=a("a370"),x=a("05c0"),T=a("ef35"),I=a("8380"),C=Object(u["a"])(p,i,r,!1,null,"54b56b34",null);t["a"]=C.exports;h()(C,"components",{QPage:v["a"],QBtnToggle:m["a"],QIcon:f["a"],QBreadcrumbs:y["a"],QBreadcrumbsEl:w["a"],QCard:b["a"],QCardSection:S["a"],QTooltip:x["a"],QInfiniteScroll:T["a"],QSpinnerDots:I["a"]})},decd:function(e,t,a){"use strict";var i=a("15be"),r=a.n(i);r.a},f30e:function(e,t,a){"use strict";var i=a("f789"),r=a.n(i);r.a},f789:function(e,t,a){}}]);